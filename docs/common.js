"use strict";(self.webpackChunkendless=self.webpackChunkendless||[]).push([[76],{8471:(g,u,r)=>{r.d(u,{b:()=>a});var a=function(o){return o[o.X3Multiplier=0]="X3Multiplier",o[o.RechargingSpeed=1]="RechargingSpeed",o[o.EnergyCapacity=2]="EnergyCapacity",o[o.Autoswipe=3]="Autoswipe",o}(a||{})},7554:(g,u,r)=>{r.d(u,{G:()=>s});var a=r(467),o=r(5312),h=r(4438),p=r(1626),f=r(418);const t=o.cA.apiUrl;let s=(()=>{class i{constructor(n,e){this.http=n,this.notifier=e,this.accessToken=""}get initData(){return window.Telegram?.WebApp?.initData}getAccessToken(){var n=this;return(0,a.A)(function*(){let e=n;return!e.expired_at||e.expired_at<=new Date?e.http.request("POST",t+"auth/telegram",{body:{initData:e.initData},headers:{"Content-Type":"application/json"}}).toPromise().then(c=>{let d=new Date;return d.setSeconds(d.getSeconds()+c.data.expiresIn),e.expired_at=d,e.accessToken=c.data.accessToken,e.accessToken}).catch(c=>(e.notifier.notify("error",c),e.accessToken)):e.accessToken})()}getAnonym(n){return this.http.get(t+n).toPromise()}get(n){return this.getAuthorizationHeaders().then(e=>this.http.get(t+n,{headers:e}).toPromise())}postAnonym(n,e){return this.http.post(t+n,e,{headers:this.getPublicHeaders()}).toPromise()}post(n,e){return this.getAuthorizationHeaders().then(c=>this.http.post(t+n,e,{headers:c}).toPromise())}getPublicHeaders(){return{"Content-Type":"application/json"}}getAuthorizationHeaders(){var n=this;return(0,a.A)(function*(){return{Authorization:`Bearer ${yield n.getAccessToken()}`,"Content-Type":"application/json"}})()}static#e=this.\u0275fac=function(e){return new(e||i)(h.KVO(p.Qq),h.KVO(f.iJ))};static#t=this.\u0275prov=h.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})()},3554:(g,u,r)=>{r.d(u,{Y:()=>f});var a=r(8471),o=r(4438),h=r(3616),p=r(7554);let f=(()=>{class t{constructor(i,l){this.scoreService=i,this.api=l,this.boosts=[{type:a.b.X3Multiplier,icon:"assets/boost-icons/X3-boost.svg",text:"Swipe Multiplier",subText:"For each swipe you get X3",price:100,isApplied:!1,multiplier:3},{type:a.b.RechargingSpeed,icon:"assets/boost-icons/recharging-boost.svg",text:"Recharging Speed",subText:"Increases the energy recharge",price:150,isApplied:!1,multiplier:1},{type:a.b.EnergyCapacity,icon:"assets/boost-icons/energy-capacity-boost.svg",text:"Energy Bar Capacity",subText:"Greater energy reserve",price:200,isApplied:!1,multiplier:1},{type:a.b.Autoswipe,icon:"assets/boost-icons/autoswipe-boost.svg",text:"Auto swipe",subText:"Auto-swipe for 4 hours",price:1500,isApplied:!1,multiplier:1}]}get boostsList(){return this.boosts}getBoostList(){return this.api.get("boosts")}buyBoost(i){let l=this,n=l.boostsList.find(e=>e.type===i);return new Promise((e,c)=>{if(l.scoreService.totalScore<n.price)return c("Insufficient balance");switch(i){case a.b.X3Multiplier:n.multiplier=3;break;case a.b.Autoswipe:n.multiplier=1,setTimeout(()=>{n.isApplied=!1},6e4);break;default:n.multiplier+=1,setTimeout(()=>{n.isApplied=!1},3e3)}return n.isApplied=!0,e(!0)})}static#e=this.\u0275fac=function(l){return new(l||t)(o.KVO(h.o),o.KVO(p.G))};static#t=this.\u0275prov=o.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})()},5286:(g,u,r)=>{r.d(u,{c:()=>h});var a=r(4438),o=r(79);let h=(()=>{class p{constructor(t){this.profileService=t,this.maxEnergy=100,this.energyIncrementer=1,this.totalUserEnergy=25,this.energyIntervals=[];let s=this;s.energyIntervals.push(setInterval(()=>{s.totalUserEnergy<s.maxEnergy&&(s.totalUserEnergy+=s.energyIncrementer,s.totalUserEnergy>s.maxEnergy&&(s.totalUserEnergy=s.maxEnergy))},1e3)),s.energyIntervals.push(setInterval(s.initEnergyService,6e5))}get availableUserEnergy(){return this.totalUserEnergy}get totalEnergy(){return this.totalUserEnergy/this.maxEnergy*100}ngOnDestroy(){this.energyIntervals.map(t=>clearInterval(t))}initEnergyService(){let t=this;return t.profileService.profile().then(s=>{t.maxEnergy=s.maxEnergy,t.energyIncrementer=s.energyRechargingPerSec,t.totalUserEnergy=s.availableEnergy})}decrementEnergy(){this.totalUserEnergy>0&&(this.totalUserEnergy-=1)}static#e=this.\u0275fac=function(s){return new(s||p)(a.KVO(o.p))};static#t=this.\u0275prov=a.jDH({token:p,factory:p.\u0275fac,providedIn:"root"})}return p})()},79:(g,u,r)=>{r.d(u,{p:()=>h});var a=r(4438),o=r(7554);let h=(()=>{class p{constructor(t){this.api=t,this.profileInterval={},this.promiseUserProfile=void 0,this.profileInterval=setInterval(this.initProfileService,6e5)}ngOnDestroy(){clearInterval(this.profileInterval)}initProfileService(){let t=this;t.refreshProfile().then(s=>{t.userProfile=s})}refreshProfile(){return this.api.post("me",{}).then(t=>t.data)}profile(){let t=this;return!t.promiseUserProfile&&!t.userProfile?.id&&(t.promiseUserProfile=this.refreshProfile()),t.promiseUserProfile??new Promise((s,i)=>{s(t.userProfile)})}static#e=this.\u0275fac=function(s){return new(s||p)(a.KVO(o.G))};static#t=this.\u0275prov=a.jDH({token:p,factory:p.\u0275fac,providedIn:"root"})}return p})()},3616:(g,u,r)=>{r.d(u,{o:()=>f});var a=r(4438),o=r(7554),h=r(79),p=r(5286);let f=(()=>{class t{constructor(i,l,n){this.api=i,this.profileService=l,this.energyService=n,this.totalUserScore=0,this.scoreIncrementer=1,this.scoreInterval={},this.scoreInterval=setInterval(this.initScoreService,6e5)}get totalScore(){return this.totalUserScore}ngOnDestroy(){clearInterval(this.scoreInterval)}initScoreService(){let i=this;return i.profileService.profile().then(l=>{i.totalUserScore=l.balance,i.scoreIncrementer=l.earnPerSwipe})}setIncrementer(i){this.scoreIncrementer=i}decrementScore(i){this.totalUserScore-=i}incrementScore(){let i=this;i.totalUserScore+=i.scoreIncrementer,i.api.post("swipes",{timestamp:(new Date).getTime(),count:i.scoreIncrementer,availableEnergy:i.energyService.availableUserEnergy})}addClaimedSum(i){this.totalUserScore+=i}static#e=this.\u0275fac=function(l){return new(l||t)(a.KVO(o.G),a.KVO(h.p),a.KVO(p.c))};static#t=this.\u0275prov=a.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})()},9692:(g,u,r)=>{r.d(u,{WW:()=>f});var a=r(177),o=r(4438);const h=new o.nKC("WindowToken",typeof window<"u"&&window.document?{providedIn:"root",factory:()=>window}:{providedIn:"root",factory:()=>{}});var p=r(1413);let f=(()=>{class l{constructor(e,c,d){this.ngZone=e,this.document=c,this.window=d,this.copySubject=new p.B,this.copyResponse$=this.copySubject.asObservable(),this.config={}}configure(e){this.config=e}copy(e){if(!this.isSupported||!e)return this.pushCopyResponse({isSuccess:!1,content:e});const c=this.copyFromContent(e);return this.pushCopyResponse(c?{content:e,isSuccess:c}:{isSuccess:!1,content:e})}get isSupported(){return!!this.document.queryCommandSupported&&!!this.document.queryCommandSupported("copy")&&!!this.window}isTargetValid(e){if(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement){if(e.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');return!0}throw new Error("Target should be input or textarea")}copyFromInputElement(e,c=!0){try{this.selectTarget(e);const d=this.copyText();return this.clearSelection(c?e:void 0,this.window),d&&this.isCopySuccessInIE11()}catch{return!1}}isCopySuccessInIE11(){const e=this.window.clipboardData;return!(e&&e.getData&&!e.getData("Text"))}copyFromContent(e,c=this.document.body){if(this.tempTextArea&&!c.contains(this.tempTextArea)&&this.destroy(this.tempTextArea.parentElement||void 0),!this.tempTextArea){this.tempTextArea=this.createTempTextArea(this.document,this.window);try{c.appendChild(this.tempTextArea)}catch{throw new Error("Container should be a Dom element")}}this.tempTextArea.value=e;const d=this.copyFromInputElement(this.tempTextArea,!1);return this.config.cleanUpAfterCopy&&this.destroy(this.tempTextArea.parentElement||void 0),d}destroy(e=this.document.body){this.tempTextArea&&(e.removeChild(this.tempTextArea),this.tempTextArea=void 0)}selectTarget(e){return e.select(),e.setSelectionRange(0,e.value.length),e.value.length}copyText(){return this.document.execCommand("copy")}clearSelection(e,c){e&&e.focus(),c.getSelection()?.removeAllRanges()}createTempTextArea(e,c){const d="rtl"===e.documentElement.getAttribute("dir");let v;return v=e.createElement("textarea"),v.style.fontSize="12pt",v.style.border="0",v.style.padding="0",v.style.margin="0",v.style.position="absolute",v.style[d?"right":"left"]="-9999px",v.style.top=(c.pageYOffset||e.documentElement.scrollTop)+"px",v.setAttribute("readonly",""),v}pushCopyResponse(e){this.copySubject.observers.length>0&&this.ngZone.run(()=>{this.copySubject.next(e)})}pushCopyReponse(e){this.pushCopyResponse(e)}}return l.\u0275fac=function(e){return new(e||l)(o.KVO(o.SKi),o.KVO(a.qQ),o.KVO(h,8))},l.\u0275prov=o.jDH({token:l,factory:l.\u0275fac,providedIn:"root"}),l})()}}]);